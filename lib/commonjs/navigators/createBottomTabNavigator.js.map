{"version":3,"names":["React","_interopRequireWildcard","require","_reactNative","_reactNativeScreens","_createTabNavigator","_interopRequireDefault","_BottomTabBar","_ResourceSavingScene","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","_defineProperty","value","_toPropertyKey","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","TabNavigationView","PureComponent","constructor","loaded","props","navigation","state","index","_ref","route","descriptors","descriptor","options","tabBarButtonComponent","tabBarComponent","TabBarComponent","BottomTabBar","tabBarOptions","screenProps","getLabelText","getAccessibilityLabel","getAccessibilityRole","getAccessibilityStates","getTestID","renderIcon","onTabPress","onTabLongPress","routes","tabBarVisible","createElement","jumpTo","_jumpTo","getButtonComponent","_getButtonComponent","onIndexChange","findIndex","getDerivedStateFromProps","nextProps","prevState","includes","render","renderScene","lazy","detachInactiveScreens","enabled","screensEnabled","View","style","styles","container","ScreenContainer","pages","map","isFocused","StyleSheet","absoluteFill","isVisible","_renderTabBar","_ref2","focused","create","flex","overflow","_default","createTabNavigator","exports"],"sources":["createBottomTabNavigator.tsx"],"sourcesContent":["import * as React from 'react';\nimport { View, StyleSheet, AccessibilityRole } from 'react-native';\nimport { NavigationRoute } from 'react-navigation';\n\nimport { ScreenContainer, screensEnabled } from 'react-native-screens';\n\nimport createTabNavigator, {\n  NavigationViewProps,\n} from '../utils/createTabNavigator';\nimport BottomTabBar from '../views/BottomTabBar';\nimport ResourceSavingScene from '../views/ResourceSavingScene';\nimport {\n  NavigationTabProp,\n  NavigationBottomTabOptions,\n  BottomTabBarOptions,\n  SceneDescriptorMap,\n} from '../types';\n\ntype Config = {\n  lazy?: boolean;\n  tabBarComponent?: React.ComponentType<any>;\n  tabBarOptions?: BottomTabBarOptions;\n  detachInactiveScreens?: boolean;\n};\n\ntype Props = NavigationViewProps &\n  Config & {\n    getAccessibilityRole: (props: {\n      route: NavigationRoute;\n    }) => AccessibilityRole | undefined;\n    getAccessibilityStates: (props: {\n      route: NavigationRoute;\n      focused: boolean;\n    }) => string[];\n    navigation: NavigationTabProp;\n    descriptors: SceneDescriptorMap;\n    screenProps?: unknown;\n  };\n\ntype State = {\n  loaded: number[];\n};\n\nclass TabNavigationView extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    lazy: true,\n    getAccessibilityRole: (): AccessibilityRole => 'button',\n    getAccessibilityStates: ({ focused }: { focused: boolean }) =>\n      focused ? ['selected'] : [],\n  };\n\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    const { index } = nextProps.navigation.state;\n\n    return {\n      // Set the current tab to be loaded if it was not loaded before\n      loaded: prevState.loaded.includes(index)\n        ? prevState.loaded\n        : [...prevState.loaded, index],\n    };\n  }\n\n  state = {\n    loaded: [this.props.navigation.state.index],\n  };\n\n  _getButtonComponent = ({ route }: { route: NavigationRoute }) => {\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarButtonComponent) {\n      return options.tabBarButtonComponent;\n    }\n\n    return undefined;\n  };\n\n  _renderTabBar = () => {\n    const {\n      tabBarComponent: TabBarComponent = BottomTabBar,\n      tabBarOptions,\n      navigation,\n      screenProps,\n      getLabelText,\n      getAccessibilityLabel,\n      getAccessibilityRole,\n      getAccessibilityStates,\n      getTestID,\n      renderIcon,\n      onTabPress,\n      onTabLongPress,\n    } = this.props;\n\n    const { descriptors } = this.props;\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarVisible === false) {\n      return null;\n    }\n\n    return (\n      <TabBarComponent\n        {...tabBarOptions}\n        jumpTo={this._jumpTo}\n        navigation={navigation}\n        screenProps={screenProps}\n        onTabPress={onTabPress}\n        onTabLongPress={onTabLongPress}\n        getLabelText={getLabelText}\n        getButtonComponent={this._getButtonComponent}\n        getAccessibilityLabel={getAccessibilityLabel}\n        getAccessibilityRole={getAccessibilityRole}\n        getAccessibilityStates={getAccessibilityStates}\n        getTestID={getTestID}\n        renderIcon={renderIcon}\n      />\n    );\n  };\n\n  _jumpTo = (key: string) => {\n    const { navigation, onIndexChange } = this.props;\n\n    const index = navigation.state.routes.findIndex(\n      (route) => route.key === key\n    );\n\n    onIndexChange(index);\n  };\n\n  render() {\n    const {\n      navigation,\n      renderScene,\n      lazy,\n      detachInactiveScreens = true,\n    } = this.props;\n    const { routes } = navigation.state;\n    const { loaded } = this.state;\n\n    const enabled = screensEnabled?.() && detachInactiveScreens;\n\n    return (\n      <View style={styles.container}>\n        {/* @ts-ignore */}\n        <ScreenContainer enabled={enabled} style={styles.pages}>\n          {routes.map((route, index) => {\n            if (lazy && !loaded.includes(index)) {\n              // Don't render a screen if we've never navigated to it\n              return null;\n            }\n\n            const isFocused = navigation.state.index === index;\n\n            return (\n              <ResourceSavingScene\n                key={route.key}\n                style={StyleSheet.absoluteFill}\n                isVisible={isFocused}\n                enabled={detachInactiveScreens}\n              >\n                {renderScene({ route })}\n              </ResourceSavingScene>\n            );\n          })}\n        </ScreenContainer>\n        {this._renderTabBar()}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  pages: {\n    flex: 1,\n  },\n});\n\nexport default createTabNavigator<Config, NavigationBottomTabOptions, Props>(\n  TabNavigationView\n);\n"],"mappings":"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"}